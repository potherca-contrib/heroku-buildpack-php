#!/usr/bin/env bash
# bin/detect <BUILD_DIR>

################################################################################
#
# ------------------------------------------------------------------------------
################################################################################

# ==============================================================================
# CONFIG
# ------------------------------------------------------------------------------
# fail fast
set -e
# ==============================================================================

BUILD_DIR=$1

# ==============================================================================
# Possible Directory Names for the DocumentRoot
# ------------------------------------------------------------------------------
declare -a aPossibleDocumentRoots

aPossibleDocumentRoots+=('www')
aPossibleDocumentRoots+=('web')
aPossibleDocumentRoots+=('html')
aPossibleDocumentRoots+=('public')
# ==============================================================================


################################################################################
# FUNCTIONS
################################################################################
# ==============================================================================
# Output some system information
# ------------------------------------------------------------------------------
function echoInfo(){
    echo '# =============================================================================='
    #echo "BIN_DIR   = ${BIN_DIR}"
    echo "BUILD_DIR = ${BUILD_DIR}"
    #echo "CACHE_DIR = ${CACHE_DIR}"
    #echo "LP_DIR    = ${LP_DIR}"
    echo "HOME      = ${HOME}"
    echo "pwd       = `pwd`"
    echo "\$2       = ${2}"
    echo '# ------------------------------------------------------------------------------'
}
# ==============================================================================


# ==============================================================================
# Tries to find out if there is a public web dir
# ------------------------------------------------------------------------------
function detectDocumentRoot(){
    bFound=false

    for sDirectory in ${aPossibleDocumentRoots}; do
        echo "Checking for existance of '${BUILD_DIR}/${sDirectory}'"
        if [ -d "${BUILD_DIR}/${sDirectory}" ]; then
            bFound=true
            break
        fi
    done

    if [ ${bFound} == true ]; then
      echo "Potherca-PHP-true"
      exit 0
    else
      echo "Potherca-PHP-false"
      exit 0
#      exit 1
    fi
}
# ==============================================================================

echoInfo
detectDocumentRoot

#EOF